---
# Description
#   Check the latency of an ELB
#
# Instructions
#   1. Add the "aws" or "aws/elb" subscriptions to agents that should run this
#      check.
#   2. More configuration options are available for this plugin; please see the
#      plugin documentation for more details.
#
# Documentation
#   - Usage: https://github.com/sensu/sensu-aws#usage-examples
#
# Contributors
#   The following individuals have contributed to this configuration template:
#   - Todd Campbell, @nixwiz
#   - Caleb Hailey, @calebhailey
type: CheckConfig
api_version: core/v2
metadata:
  name: sensu-aws/check-elb-latency
spec:
  command: >-
    check-elb-latency
    --aws_region={{ .annotations.check_elb_latency_aws_region | default "us-east-1" }}
    --elb_names={{ .annotations.check_elb_latency_elb_names | default "" }}
    --period={{ .annotations.check_elb_latency_period | default 60 }}
    --statistics={{ .annotations.check_elb_latency_statistics | default "average" }}
    --critical_over={{ .annotations.check_elb_latency_critical_over | default 60 }}
    --warning_over={{ .annotations.check_elb_latency_warning_over | default 60 }}
  runtime_assets:
    - sensu/sensu-aws:0.0.5
  publish: false
  subscriptions:
    - aws
    - aws/elb
  interval: 30
  timeout: 10
  ttl: 0
  proxy_entity_name: ""
  stdin: false
  handlers:
    - alert
---
type: Asset
api_version: core/v2
metadata:
  name: sensu-aws:0.0.5
  labels:
  annotations:
    io.sensu.bonsai.url: https://bonsai.sensu.io/assets/sensu/sensu-aws
    io.sensu.bonsai.api_url: https://bonsai.sensu.io/api/v1/assets/sensu/sensu-aws
    io.sensu.bonsai.tier: Supported
    io.sensu.bonsai.version: 0.0.5
    io.sensu.bonsai.namespace: sensu
    io.sensu.bonsai.name: sensu-aws
    io.sensu.bonsai.tags: aws, collection, ec2, elb, rds, s3
spec:
  builds:
    - url: https://assets.bonsai.sensu.io/026536af6e164b71a19128e2811c1af579f96324/sensu-aws_0.0.5_windows_amd64.tar.gz
      sha512: 408e11c13969c23b75112f0c86b22ec60c1d42e95f39101100ae4d8febc4af40dd2433fc29ba751b932722ccad4bdf7ed78c3fc79efb97c9c1db24d1d8cc3d7b
      filters:
        - entity.system.os == 'darwin'
        - entity.system.arch == 'amd64'
    - url: https://assets.bonsai.sensu.io/026536af6e164b71a19128e2811c1af579f96324/sensu-aws_0.0.5_darwin_386.tar.gz
      sha512: 86dba952999f79aec037081aa058d055c08b349f55b9e7e817b05b42d3cdf2cdda61bd3b77014696f73c026c6d1106bcf41e14114455672a0e427a8bb3bebcc7
      filters:
        - entity.system.os == 'darwin'
        - entity.system.arch == '386'
    - url: https://assets.bonsai.sensu.io/026536af6e164b71a19128e2811c1af579f96324/sensu-aws_0.0.5_darwin_amd64.tar.gz
      sha512: b295a569baf7509cc9849a16e0da5e2e618878f54779a933ec94876308ff08e0e28437dbca0987c4126cd0ca996fba4274549796e77283dd0a9926c432a4b3dd
      filters:
        - entity.system.os == 'darwin'
        - entity.system.arch == 'amd64'
    - url: https://assets.bonsai.sensu.io/026536af6e164b71a19128e2811c1af579f96324/sensu-aws_0.0.5_linux_armv7.tar.gz
      sha512: c49f3b663f6810bec33806466b3cbc48f52af27f397b85d5fcaca8d1478c40abb2d7f91200eb40cfdcdd6bdddb4fd4d4bc60cf3011e3091e444594d52f61794f
      filters:
        - entity.system.os == 'linux'
        - entity.system.arch == 'armv7'
    - url: https://assets.bonsai.sensu.io/026536af6e164b71a19128e2811c1af579f96324/sensu-aws_0.0.5_linux_arm64.tar.gz
      sha512: 04624c762fe82d1cd187aaf4538ced1407e90ede97a235c80ca33be1ee40a10a97263cecc85ac29a54637e1a27bebe4787a4fca36a7af177d164dad0e3a022cf
      filters:
        - entity.system.os == 'linux'
        - entity.system.arch == 'arm64'
    - url: https://assets.bonsai.sensu.io/026536af6e164b71a19128e2811c1af579f96324/sensu-aws_0.0.5_linux_386.tar.gz
      sha512: d9e2616b125c3fbe070117fde8667390c9bf181408fa24aaa7d0e0bdfe369cfe0cf207ddc9d4e122a905f600f17f3da0c105090d0602a1f64732d1ba6f71ede1
      filters:
        - entity.system.os == 'linux'
        - entity.system.arch == '386'
    - url: https://assets.bonsai.sensu.io/026536af6e164b71a19128e2811c1af579f96324/sensu-aws_0.0.5_linux_amd64.tar.gz
      sha512: e330969997574caecb973eba004fd74f2d3fb866ed07f524f6b96ec7290691e3a5dff1766869c675d6c56784c482121e00ffa52e6e95f3512d1baaa706af3dc1
      filters:
        - entity.system.os == 'linux'
        - entity.system.arch == 'amd64'
